# Implementation of first programming assignment for System Programming course (Spring Semester 2020)

////////////////////////////////////////////////////////////////////////////////
//					Προγραμματισμός Συστήματος								  
//					Εαρινό Εξάμηνο 2019-2020								  
//																			  
//							Εργασία 1										  
////////////////////////////////////////////////////////////////////////////////

Όνομα: Αναστάσιος
Επώνυμο: Αντωνόπουλος
Α.Μ.: 1115201400014

////////////////////////////////////////////////////////////////////////////////

Εντολή Μεταγλώττισης: make
Εντολή Διαγραφής Εκτελέσιμου: make clean

Παράδειγμα Εντολής Εκτέλεσης: ./diseaseMonitor -p small.txt -h1 5 -h2 5 -b 50

////////////////////////////////////////////////////////////////////////////////

Η εργασία υλοποιήθηκε με την χρήση του Visual Studio Code σε σύστημα Ubuntu.

Κατά την υλοποίηση της έχει γίνει χρήση του εργαλείου valgrind για έλεγχο memory
leak με την εξής εντολή: 
	valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all --track-origins=yes ./diseaseMonitor -p small -h1 2 -h2 5 -b 50

Επιπλέον ελέγχθηκε από το validator.sh με Pass σε όλα τα πεδία.

Τα αρχεία της εργασίας έχουν οργανωθεί με τον εξής τρόπο:
	-Φάκελος diseaseMonitor: Περιέχει το test αρχείο small.txt, το Makefile, το 
	τρέχον αρχείο README και εκεί δημιουργείται και το εκτελέσιμο diseaseMonitor. Επιπλέον περιέχονται και οι φάκελοι που αναφέρονται παρακάτω.

	-Φάκελος OtherTestFiles: Περιέχει τα αρχεία small, medium και large τα οποία
	είχαν αναρτηθεί στο piazza και χρησιμοποιήθηκαν κατα την διάρκεια της υλοποίησης
	της εργασίας.

	-Φάκελος obj: Εδώ τοποθετούνται τα object files που δημιουργούνται κατά την 
	μεταγλώττιση του προγράμματος.

	-Φάκελος src: Περιέχονται όλα τα source files του προγράμματος και ο φάκελος
	include.

	-Φάκελος include: Εδώ περιέχονται όλα τα header files του προγράμματος.

Στον κώδικα της εργασίας περιέχονται σχόλια για την λειτουργικότητα του προγράμματος.

////////////////////////////////////////////////////////////////////////////////

Συνοπτική Περιγραφή:
Αρχικά το πρόγραμμα διαβάζει τα arguments που δόθηκαν απο την γραμμή εντολής κατά
την εντολή εκτέλεσης. Αν υπάρχει κάποιο σφάλμα το πρόγραμμα θα τερματιστεί και θα 
εκτυπώσει το αντίστοιχο μήνυμα.

Στην συνέχεια διαβάζει από το δοθέν αρχείο κάθε γραμμή και την αποθηκεύει με την 
μορφή Record Struct σε μία μονά συνδεδεμένη λίστα και ύστερα αποθηκεύει τον αντίστοιχο
δείκτη στα 2 HashTables. Το diseaseHashTable και το countryHashTable.

Κατά την διάρκεια της εισαγωγής από το αρχείο αν κάποιο recordID υπάρχει πάνω από
μία φορά ή αν σε κάποια εγγραφή η σειρά των entry date και exit date είναι λανθασμένη.
Τότε το πρόγραμμα θα τερματιστεί εμφανίζοντας το αντίστοιχο μήνυμα λάθους.

Ύστερα από την ολοκλήρωση των εισαγωγών το πρόγραμμα έιναι έτοιμο να δεχθεί τις 
εντόλες από τον χρήστη. Σε περίπτωση εισαγωγής λάθους εντολής το πρόγραμμα εμφανίζει
σχετικό μήνυμα λάθους και περιμένει από τον χρήστη να εισάγει νέα εντολή μέχρι ο χρήστης
να εισάγει την εντολή εξόδου exit και το πρόγραμμα να τερματίσει.

Στις εντολές που υπάρχουν σαν όρισματα τα date1 date2 γίνεται έλεγχος αν ισχύει η 
συνθήκη date1 >= date2. Αν δεν ισχύει εμφανίζεται σχετικό μήνυμα λάθους.
Επιπλέον στα Date γίνεται και έλεγχος αν ισχύουν τα εξής:
	-Day range [1-31]
	-Month range [1-12]
	-Year range [1000-9999]
Αν κάποιο από τα παραπάνω δεν ικανοποιείται τότε εμφανίζεται μύνημα λάθους.

Αντίστοιχοι έλεγχοι λάθους από τον χρήστη γίνονται και κατά την διάρκει της δημιουργίας
των Hash Tables όπου ελέγχονται αν τα μεγέθη hashTableSize και bucketSize είναι σωστά.
Π.Χ. στο Bucket το bucketSize να είναι αρκετό ώστε να χωράει τουλάχιστον ένα entry.
Σε περίπτωση τέτοιου σφάλματος το πρόγραμμα εμφανίζει το σχετικό μύνημα και τερματίζει.

Επιπλέον κατά την εκτέλεση της εντολής /insertPatientRecord αν το ID υπάρχει ήδη τότε
η εκτέλεση της εντολής ακυρώνεται εμφανίζοντας σχετικό μύνημα λάθους.

Τέλος κατά την εκτέλεση της εντολής /recordPatientExit αν στην εγγραφή δεν υπάρχει ήδη
ημερομηνία exit date τότε δημιουργείται μια. Αν όμως υπάρχει ήδη τότε την κάνει Update.

Για την υλοποίηση των εντολών /topk-Diseases και /topk-Countries έγινε υλοποίηση ενός
complete binary tree για την δημιουργία του οποίου υλοποιήθηκε και μία Queue με την μορφή
μονής συνδεδεμένης λίστας. Αυτή χρησιμοποιείται για τις εισαγωγές στο δέντρο έτσι ώστε να 
είναι complete tree αλλά και κατά την διάρκεια του pop της ρίζας του Max Heap έτσι ώστε να 
διατηρείται η ιδίοτητα του complete tree στο δέντρο και κατά τις διαγραφές.

////////////////////////////////////////////////////////////////////////////////

Ο κώδικας έχει οργανωθεί ως εξής:
	-Αρχείο main.c: 
		Περιέχει την main του προγράμματος.

	-Αρχεία interfaceCommands.c / interfaceUtilities.c / filereader.c
		Περιέχουν μεθόδους που αφορόυν το δίαβασμα τους αρχείου, δίαβασμα input εντολών
		από τον χρήστη καθώς και την υλοποίηση των εντολών του interface του προγράμματος.

	-Αρχεία record.c / recordsList.c:
		Περιέχουν μεθόδους για την λειτουργικότητα της λίστας στην οποία αποθηκεύονται τα
		records από το αρχείο.

	-Αρχεία avlTree.c / hashTables.c / hashTablesBucket.c / hashTablesBucketEntry.c:
		Περιέχουν μεθόδους για την λειτουργικότητα των δόμων τα οποία προσφέρουν γρήγορη πρόσβαση
		στην λίστα των records.

	-Αρχείο maxHeap.c:
		Περιέχει μεθόδους για την λειτουργικότητα του max heap που χρησιμοποιείται για την εκτέλεση των topk-Diseases και topk-Countries εντολών.
		
////////////////////////////////////////////////////////////////////////////////
